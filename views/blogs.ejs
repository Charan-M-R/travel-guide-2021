<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
      <link rel="stylesheet" href="css/styles-blogs.css">
      <link href="https://fonts.googleapis.com/css2?family=PT+Sans+Narrow&display=swap" rel="stylesheet">
    <title></title>
  </head>

  <body>
    <!-- NAVBAR -->
  <div class="navigation" style="padding-left: 70px;">
    <nav class="navbar navbar-expand-lg navbar-dark">
      <a class="navbar-brand" style="  padding-left: 100px;  padding-right: 600px;" href="/home">Travel Guide</a>
       <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse ml-auto" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
          <li class="nav-item">
              <a class="nav-link" href="/">Login</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="/blogs">Blogs</a>
          </li>
          <li class="nav-item">
              <a class="nav-link" href="/destinations"> Destinations</a>
          </li>
      </ul>
   </div>
  </nav>

      <div class=" row row2 " style="
      padding-bottom: 30px;
      padding-top: 10px;">
    <div class="col-md-4"  style="
    margin-left: 329px;">
      <form action="/blogs" method="post">
        <div class="input-group">
          <input type="search" name="search1" class="form-control rounded" placeholder="Search blog by keyword" aria-label="Search"
          aria-describedby="search-addon" />
          <button onclick="window.location.href='/blogs'" class="btn btn-dark">Search</button>
        </div>
      </form>

    </div>
    <div class="col-md-4" style="padding-right: 350px;">
      <form action="/blogcreate" method="get">
        <button  onclick="window.location.href='/blogs'" class="create btn btn-dark">Create Blog</button>
      </form>
    </div>
    </div>


  </div>
<% let ref="" %>
<% for (let i = 0; i < Math.floor(blogs.length/2); i++) { %>
  <section id="blogs">

   <!-- To make the cards grouped in a deck -->
    <div class="row" >
     <div class="col-md-6 d-flex justify-content-center">
       <div class="card text-white bg-dark mb-3" style="max-width: 18rem;width: 292px;">
         <div class="card-header">posted by : <%= blogs[i*2+0]['name']%></div>
           <div class="card-header">Date : <%= blogs[i*2+0]['date'].toDateString()%></div>
           <div class="card-header">Location :<%= blogs[i*2+0]['dest']%></div>
         <div class="card-body">
           <h5 class="card-title">Title :<%= blogs[i*2+0]['title']%></h5>
           <p class="card-text textlimit"><%= blogs[i*2+0]['content']%></p>


          <% text = blogs[i*2+0]['title'].replace(/ /g, "_");%>
          <% ref = "/blogs/" + text %>
          <a href= <%= ref %> class="btn btn-primary btn-block">Read More</a>
         </div>
       </div>
      </div>
      <div class="col-md-6 d-flex justify-content-center">
        <div class="card text-white bg-dark mb-3" style="max-width: 18rem;width: 292px;">
          <div class="card-header">Posted by : <%= blogs[i*2+1]['name']%></div>
            <div class="card-header">Date : <%= blogs[i*2+1]['date'].toDateString()%></div>
            <div class="card-header">Location :<%= blogs[i*2+1]['dest']%></div>
          <div class="card-body">
            <h5 class="card-title">Title :<%= blogs[i*2+1]['title']%></h5>
            <p class="card-text textlimit"><%= blogs[i*2+1]['content']%></p>

            <%text = blogs[i*2+1]['title'].replace(/ /g, "_");%>
            <% ref = "/blogs/" + text %>
           <a href=<%= ref %> class="btn btn-primary btn-block">Read More</a>
          </div>
        </div>
       </div>

    </div>
  </section>
  <%}%>

  <%if(blogs.length%2==1){%>
    <section id="blogs">

     <!-- To make the cards grouped in a deck -->
      <div class="row" >
        <div class="col-md-6 d-flex justify-content-center">
          <div class="card text-white bg-dark mb-3" style="max-width: 18rem;width: 292px;">
            <div class="card-header">Posted by : <%= blogs[blogs.length-1]['name']%></div>
              <div class="card-header">Date : <%= blogs[blogs.length-1]['date'].toDateString()%></div>
              <div class="card-header">Location :<%= blogs[blogs.length-1]['dest']%></div>
            <div class="card-body">
              <h5 class="card-title">Title :<%= blogs[blogs.length-1]['title']%></h5>
              <p class="card-text textlimit"><%= blogs[blogs.length-1]['content']%></p>
              <% console.log(blogs[blogs.length-1]['title'].replace(/ /g, "_")); %>
              <% let text = blogs[blogs.length-1]['title'].replace(/ /g, "_");%>
              <% ref = "/blogs/" + text %>
             <a href= <%= ref %> class="btn btn-primary btn-block">Read More</a>
            </div>
          </div>
         </div>
      </div>
    </section>

  <%}%>

  </body>
</html>
